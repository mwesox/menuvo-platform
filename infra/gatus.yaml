storage:
  type: sqlite
  path: /data/gatus.db

web:
  port: 8080

ui:
  title: "Menuvo Status"
  header: "Menuvo Status"
  description: "Service health monitoring for Menuvo platform"

alerting:
  telegram:
    token: ${GATUS_TELEGRAM_TOKEN}
    id: ${GATUS_TELEGRAM_CHAT_ID}

endpoints:
  # API Server (Hetzner VPS)
  - name: api-health
    group: api
    url: https://api.menuvo.app/health
    interval: 30s
    conditions:
      - "[STATUS] == 200"
      - "[BODY].status == ok"
      - "[BODY].db == ok"
    alerts:
      - type: telegram
        description: "API health check failing"
        send-on-resolved: true
        failure-threshold: 3
        success-threshold: 2

  - name: api-live
    group: api
    url: https://api.menuvo.app/live
    interval: 30s
    conditions:
      - "[STATUS] == 200"
      - "[BODY].status == ok"
    alerts:
      - type: telegram
        description: "API is down"
        send-on-resolved: true
        failure-threshold: 3
        success-threshold: 2

  # Shop (Cloudflare Pages)
  - name: shop
    group: frontend
    url: https://menuvo.app
    interval: 60s
    conditions:
      - "[STATUS] == 200"
      - "[RESPONSE_TIME] < 3000"
    alerts:
      - type: telegram
        description: "Shop is down"
        send-on-resolved: true
        failure-threshold: 3
        success-threshold: 2

  # Console (Cloudflare Pages)
  - name: console
    group: frontend
    url: https://console.menuvo.app
    interval: 60s
    conditions:
      - "[STATUS] == 200"
      - "[RESPONSE_TIME] < 3000"
    alerts:
      - type: telegram
        description: "Console is down"
        send-on-resolved: true
        failure-threshold: 3
        success-threshold: 2

  # Business/Landing (Cloudflare Pages)
  - name: business
    group: frontend
    url: https://business.menuvo.app
    interval: 60s
    conditions:
      - "[STATUS] == 200"
      - "[RESPONSE_TIME] < 3000"
    alerts:
      - type: telegram
        description: "Business site is down"
        send-on-resolved: true
        failure-threshold: 3
        success-threshold: 2

  # Internal monitoring (not on public status page)
  - name: caddy
    group: internal
    url: http://menuvo-caddy:2019/config/
    interval: 60s
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: telegram
        description: "Caddy reverse proxy is down"
        send-on-resolved: true
        failure-threshold: 3
        success-threshold: 2

  - name: postgres
    group: internal
    url: tcp://menuvo-postgres:5432
    interval: 60s
    conditions:
      - "[CONNECTED] == true"
    alerts:
      - type: telegram
        description: "PostgreSQL is unreachable"
        send-on-resolved: true
        failure-threshold: 3
        success-threshold: 2

  - name: redis
    group: internal
    url: tcp://menuvo-redis:6379
    interval: 60s
    conditions:
      - "[CONNECTED] == true"
    alerts:
      - type: telegram
        description: "Redis is unreachable"
        send-on-resolved: true
        failure-threshold: 3
        success-threshold: 2
